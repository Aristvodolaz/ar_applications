# AR Application

## Описание проекта

AR Application - это инновационное приложение для Android, разработанное для обеспечения видеосвязи и удаленной поддержки с использованием технологий дополненной реальности (AR). Приложение оптимизировано как для стандартных мобильных устройств, так и для AR-очков, предоставляя адаптивный пользовательский интерфейс, который автоматически настраивается в зависимости от типа устройства.

## Основные функции

- **Аутентификация с помощью QR-кода**: Быстрый и безопасный вход в систему путем сканирования QR-кода.
- **Видеозвонки с поддержкой AR**: Высококачественные видеозвонки с возможностью добавления аннотаций в режиме реального времени.
- **Адаптивный интерфейс**: Автоматическая адаптация UI для обычных устройств и AR-очков.
- **Управление жестами**: Интуитивное управление для AR-устройств с помощью жестов.
- **Обмен файлами**: Возможность обмена файлами во время видеозвонка.
- **Чат**: Текстовый чат для обмена сообщениями во время видеозвонка.
- **Аннотации**: Возможность добавления визуальных пометок на видеопоток для улучшения коммуникации.
- **Выбор камеры**: Возможность выбора между фронтальной, основной и внешними камерами устройства.

## Архитектура проекта

Проект построен с использованием модульной архитектуры, что обеспечивает лучшую масштабируемость и поддержку кода:

- **app**: Основной модуль приложения, содержащий точку входа и навигацию.
- **core**: Базовый модуль с общими компонентами, утилитами и адаптивным UI.
- **auth**: Модуль аутентификации, включающий сканирование QR-кода и вход в систему.
- **videocall**: Модуль видеозвонков с поддержкой WebRTC и аннотаций.

## Технологии

- **Kotlin**: Основной язык программирования.
- **Jetpack Compose**: Современный инструментарий для создания нативного UI на Android.
- **Hilt**: Внедрение зависимостей.
- **Coroutines & Flow**: Асинхронное программирование.
- **WebRTC**: Технология для видеозвонков в реальном времени.
- **CameraX**: API для работы с камерой.
- **Accompanist**: Библиотека для расширения возможностей Compose.

## Требования

- Android 7.0 (API 24) или выше
- Поддержка AR-устройств (опционально)
- Доступ к камере и микрофону

## Установка и запуск

1. Клонируйте репозиторий:
   ```
   git clone https://github.com/your-username/ar_application.git
   ```

2. Откройте проект в Android Studio.

3. Синхронизируйте Gradle и дождитесь завершения загрузки зависимостей.

4. Запустите приложение на устройстве или эмуляторе.

## Особенности разработки

### Адаптивный UI

Приложение использует специальный класс `ARConfig` для настройки UI в зависимости от типа устройства. Для AR-устройств применяются увеличенные размеры элементов, высококонтрастные цвета и оптимизированные шрифты для лучшей видимости.

```kotlin
data class ARConfig(
    val isARDevice: Boolean = false,
    val largePadding: Dp = if (isARDevice) 32.dp else 16.dp,
    val mediumPadding: Dp = if (isARDevice) 16.dp else 8.dp,
    // ...
)
```

### Управление жестами

Для AR-устройств реализовано специальное управление жестами:
- Свайп влево: включение/выключение микрофона
- Свайп вправо: включение/выключение камеры
- Двойное нажатие: завершение звонка

### Запрос разрешений

Приложение включает красивые экраны запроса разрешений с анимацией и информативным описанием, что улучшает пользовательский опыт:

```kotlin
@Composable
fun CameraPermissionScreen(
    onRequestPermission: () -> Unit,
    config: ARConfig? = null
) {
    PermissionScreen(
        title = "Доступ к камере",
        description = "Для работы приложения необходим доступ к камере...",
        // ...
    )
}
```

### Выбор камеры

Приложение автоматически определяет доступные камеры на устройстве и предоставляет удобный интерфейс для их выбора:

```kotlin
// Получение списка доступных камер
val availableCameras = CameraUtils.getAvailableCameras(context)

// Диалог выбора камеры
CameraSelectorDialog(
    availableCameras = availableCameras,
    selectedCamera = selectedCamera,
    onCameraSelected = { camera ->
        // Переключение на выбранную камеру
    },
    onDismiss = { /* ... */ },
    config = config
)
```

Поддерживаются следующие типы камер:
- Фронтальная камера (для селфи)
- Основная камера (задняя)
- Внешние камеры (если подключены к устройству)


*Примечание: Это приложение оптимизировано для работы с AR-очками Rokid, но также поддерживает стандартные Android-устройства.* 
